#+TITLE: Design

- Everything is a controller
- Examples of controllers
  - Keyboard controller
    - Receives keypresses
  - Action controller
    - Handles multi-part actions, depends on input from various other controllers (like keyboard, mouse, hover, drag, websocket)
  - Mouse controller
    - Keeps track of where the mouse is
    - Sends out mouse events
  - Drag controller
    - Handles drag actions
  - Hover controller
    - Keeps track of what the mouse is hovering over
  - Pick controller
    - Allows the user to pick something (a color, an object from a palette, etc.)
  - Dialogue controller
    - Shows pop-ups
  - Editing controller
    - Keeps track of the state of what is being edited
    - Displays what is edited
    - Receives actions from action controller
  - Websocket controller
    - Communicates with the backend
- Controllers have
  - An "inbox"
  - An "outbox"
  - A hook that runs once and modifies the global SVG element, adding
    - Event listeners
    - SVG nodes
  - A current state
  - An event-processing function that
    - Updates the state
    - Sends out events
- Controllers can
  - Subscribe to the outbox of other controllers
  - Send things to the inbox of other controllers
- Controllers are accessed through a ControllerRegistry, via ControllerHandles
