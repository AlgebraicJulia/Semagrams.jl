<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Semagrams.jl · Semagrams.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Semagrams.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Semagrams.jl</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Quickstart"><span>Quickstart</span></a></li><li><a class="tocitem" href="#Extended-Introduction"><span>Extended Introduction</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Semagrams.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Semagrams.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/AlgebraicJulia/Semagrams.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Semagrams.jl"><a class="docs-heading-anchor" href="#Semagrams.jl">Semagrams.jl</a><a id="Semagrams.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Semagrams.jl" title="Permalink"></a></h1><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><pre><code class="language-julia hljs">&gt; using Pkg; Pkg.add(&quot;Semagrams&quot;); Pkg.add(&quot;Catlab&quot;)
&gt; using Semagrams, Catlab</code></pre><p>Due to an <a href="https://github.com/JuliaGizmos/WebIO.jl/issues/442">upstream issue</a>, Semagrams.jl is currently only compatible with JupyterLab v2 (the latest version is v3). Therefore, you must downgrade your JupyterLab installation. For example, if you use Anaconda, you can do this by running <code>conda install jupyterlab=2.3.1</code>.</p><p>As an alternative to JupyterLab, you can use the standalone version of Semagrams.jl, which serves the application from a standalone web server; see the rest of this guide for how to do this.</p><h2 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h2><p>In a JupyterLab notebook:</p><pre><code class="language-julia hljs">&gt; using Semagrams, Semagrams.Examples

&gt; p = Semagram{ReactionNet{Float64}}(ReactionNetSema)

# Edit semagram (see below)

&gt; get_acset(p)</code></pre><h2 id="Extended-Introduction"><a class="docs-heading-anchor" href="#Extended-Introduction">Extended Introduction</a><a id="Extended-Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-Introduction" title="Permalink"></a></h2><p>There are three steps to using Semagrams.</p><h3 id=".-Prepare-schemas."><a class="docs-heading-anchor" href="#.-Prepare-schemas.">1. Prepare schemas.</a><a id=".-Prepare-schemas.-1"></a><a class="docs-heading-anchor-permalink" href="#.-Prepare-schemas." title="Permalink"></a></h3><p>This is the hardest part, and only has to be done when you are adding a <em>new</em> type of semagram; if you are using one of the semagrams supplied by this library (by <code>using Semagrams.Examples</code>) or another library, you can skip step 1.</p><p>First of all, you have to make an acset. Documentation for this can be found in <a href="https://algebraicjulia.github.io/Catlab.jl/dev/apis/categorical_algebra/#Acsets">Catlab</a>.</p><p>We will use the running examples of <em>Labeled Directed Port Graphs</em> and <em>Reaction Nets</em>. These have the schemas</p><pre><code class="language-julia hljs">@present TheoryReactionNet(FreeSchema) begin
  (T,S,I,O)::Ob
  it::Hom(I,T)
  is::Hom(I,S)
  ot::Hom(O,T)
  os::Hom(O,S)
  N::Data
  rate::Attr(T,N)
  concentration::Attr(S,N)
end

const ReactionNet = CSetType(TheoryReactionNet)</code></pre><p>and</p><pre><code class="language-julia hljs">@present TheoryDirectedPortGraph(FreeSchema) begin
  (Box,IPort,OPort,Wire)::Ob
  ibox::Hom(IPort,Box)
  obox::Hom(OPort,Box)
  src::Hom(Wire,OPort)
  tgt::Hom(Wire,IPort)
end

const DPG = CSetType(TheoryDirectedPortGraph)</code></pre><p>After making an acset, you must make a semagrams schema for the acset you made in step 1. The basic idea behind this is that you have to tell Semagrams.jl what role the objects in your acset play. Currently the three roles are</p><ol><li>Box</li><li>Port</li><li>Wire</li><li>Data</li></ol><p>Boxes have no outgoing morphisms (though, they can have attributes). Ports have exactly one outgoing morphism, to a box. Wires have two outgoing morphisms, one which gives the &quot;source&quot; of the wire, and another which gives the &quot;target&quot;. These outgoing morphisms can go to <em>either</em> ports or boxes. Data objects in the acset schema must be given input types. The two choices are <code>Stringlike</code> or <code>Numeric</code>, which correspond to text boxes and sliders respectively (the slider goes from 0 to 100, we will eventually have something to configure this range).</p><p>You can designate a SVG object for each box. For instance, in a Petri net, you can make the species circles and the transitions squares. For the ports, you can designate a &quot;style&quot;, which designates the placement of the ports. This can either be &quot;Input&quot;, &quot;Output&quot;, or &quot;Circular&quot;, which places the ports vertically stacked on the left, vertically stacked on the right, and equally spaced around a circle.</p><p>For our two running examples, this looks like</p><pre><code class="language-julia hljs">@semagramschema ReactionNetSema(TheoryReactionNet) begin
  @box S Circle
  @box T Square
  @wire I(is,it)
  @wire O(ot,os)
  @data N Numeric
end</code></pre><pre><code class="language-julia hljs">@semagramschema DirectedPortGraphSema(TheoryDirectedPortGraph) begin
  @box Box Square
  @port IPort(ibox) &quot;Input&quot;
  @port OPort(obox) &quot;Output&quot;
  @wire Wire(src,tgt)
  @data String Stringlike
end</code></pre><h3 id=".-Create-and-edit-the-semagram."><a class="docs-heading-anchor" href="#.-Create-and-edit-the-semagram.">2. Create and edit the semagram.</a><a id=".-Create-and-edit-the-semagram.-1"></a><a class="docs-heading-anchor-permalink" href="#.-Create-and-edit-the-semagram." title="Permalink"></a></h3><p>First you have to create the semagram.</p><pre><code class="language-julia hljs">my_awesome_petri_net = Semagram{ReactionNet{Float64}}(ReactionNetSema)</code></pre><p>or</p><pre><code class="language-julia hljs">my_awesome_dpg = Semagram{DPG}(DirectedPortGraphSema)</code></pre><p>When you run this line in a Jupyter notebook, the editor should pop up as the result IF you have WebIO properly installed (which actually somewhat tricky, and WebIO is not supported for the latest version of Jupyter yet).</p><p>If you are running in the Julia REPL, you have to do the following to interact with the Semagram:</p><pre><code class="language-julia hljs">serve_semagram(my_awesome_semagram)</code></pre><p>By default, this will open a server on port 8000, you can change this port by passing in a <code>port</code> keyword argument to <code>serve_semagram</code>. It will also try to open a browser pointing to <code>http://localhost:$port</code> (<code>http://localhost:8000</code> by default).</p><p>Currently the editor is very barebones; you have to refer here for the keybindings.</p><ul><li><code>b</code> adds a box under the cursor. If there are multiple types of box that one can add, it will pop up a modal window which allows you to select the type by typing a number.</li><li><code>p</code> adds a port to the box that the cursor is hovering over. If there are multiple types of port, then again a window will pop up which allows you to select the type of port that you want to add.</li><li><code>s</code> sets a port or box to be the current &quot;source&quot;. When you select the source, it should turn <em>light blue</em>.</li><li><code>t</code> sets a port or box to be the current &quot;target&quot;. When you select the target it should turn <em>light red</em>.</li><li><code>w</code> adds a new wire, using the ports/boxes selected as source and target. If there is no wire type compatible with the source/target pair, then this will remove the selection of source/target and not add a wire. If there is more than one wire type that could be added, it will pop up a modal asking you which type of wire you wish to add.</li><li><code>d</code> deletes the wire, port or box under the cursor.</li><li><code>D</code> prints the current value of the semagram to the javascript console. Useful for debugging.</li><li><code>Escape</code> clears the current selection of the source/target</li><li><code>?</code> brings up the help menu</li></ul><p>When you click on an entity, below the main window should pop up widgets that allow you to edit the attributes of that entity.</p><h3 id=".-Profit"><a class="docs-heading-anchor" href="#.-Profit">3. Profit</a><a id=".-Profit-1"></a><a class="docs-heading-anchor-permalink" href="#.-Profit" title="Permalink"></a></h3><p>Once you have edited your semagram, you can get an acset out of it using</p><pre><code class="language-julia hljs">get_acset(my_awesome_petri_net)</code></pre><p>or</p><pre><code class="language-julia hljs">get_acset(my_awesome_dpg)</code></pre><p>This will return the current value of the semagram as an acset. Then you can do all the acset-y good things that one does with acsets.</p><p>If you want to save the semagram, you have to save more than the acset, because we don&#39;t have automatic layout algorithms. To save the current state of the acset to a file, run</p><pre><code class="language-julia hljs">save(my_awesome_dpg, &quot;my_awesome_dpg.sema&quot;)</code></pre><p>Then, later on you can run</p><pre><code class="language-julia hljs">load(my_awesome_dpg, &quot;my_awesome_dpg.sema&quot;)</code></pre><p>and it will load up whatever you saved earlier.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Thursday 26 August 2021 21:11">Thursday 26 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
